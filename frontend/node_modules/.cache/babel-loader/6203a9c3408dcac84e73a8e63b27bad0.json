{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Chauhan/OneDrive/Desktop/All-projects/proshopmastered/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect}from'react';import{Link,useNavigate,useParams}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Row,Col,ListGroup,Image,Form,Button,Card}from'react-bootstrap';import Message from'../components/Message';import{addToCart,removeFromCart}from'../actions/cartActions';import{useLocation}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartScreen=function CartScreen(){var _useParams=useParams(),id=_useParams.id;var history=useNavigate();var location=useLocation();var productId=id;var qty=location.search?Number(location.search.split('=')[1]):1;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var checkoutHandler=function checkoutHandler(){if(userInfo){history(\"/shipping\");}else{history(\"/login\");}};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{children:[\"Your cart is empty \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back\"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product);})})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce(function(acc,item){return acc+item.qty;},0),\") items\"]}),\"$\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2)]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Proceed To Checkout\"})})]})})})]});};export default CartScreen;","map":{"version":3,"names":["React","useEffect","Link","useNavigate","useParams","useDispatch","useSelector","Row","Col","ListGroup","Image","Form","Button","Card","Message","addToCart","removeFromCart","useLocation","CartScreen","id","history","location","productId","qty","search","Number","split","dispatch","cart","state","cartItems","removeFromCartHandler","userLogin","userInfo","checkoutHandler","length","map","item","image","name","product","price","e","target","value","Array","countInStock","keys","x","reduce","acc","toFixed"],"sources":["C:/Users/Chauhan/OneDrive/Desktop/All-projects/proshopmastered/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Link, useNavigate, useParams } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Row, Col, ListGroup, Image, Form, Button, Card } from 'react-bootstrap'\r\nimport Message from '../components/Message'\r\nimport { addToCart, removeFromCart } from '../actions/cartActions'\r\nimport { useLocation } from 'react-router-dom'\r\n\r\nconst CartScreen = () => {\r\n  const { id } = useParams()\r\n  const history = useNavigate()\r\n  const location = useLocation();\r\n  const productId = id\r\n\r\n  const qty = location.search ? Number(location.search.split('=')[1]) : 1\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const cart = useSelector((state) => state.cart)\r\n  const { cartItems } = cart\r\n\r\n  useEffect(() => {\r\n    if (productId) {\r\n      dispatch(addToCart(productId, qty))\r\n    }\r\n  }, [dispatch, productId, qty])\r\n\r\n  const removeFromCartHandler = (id) => {\r\n    dispatch(removeFromCart(id))\r\n  }\r\n  const userLogin = useSelector((state) => state.userLogin)\r\n  const { userInfo } = userLogin\r\n  const checkoutHandler = () => {\r\n\r\n    if(userInfo){\r\n      history(\"/shipping\")\r\n    } else {\r\n      history(\"/login\")\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Row>\r\n      <Col md={8}>\r\n        <h1>Shopping Cart</h1>\r\n        {cartItems.length === 0 ? (\r\n          <Message>\r\n            Your cart is empty <Link to='/'>Go Back</Link>\r\n          </Message>\r\n        ) : (\r\n          <ListGroup variant='flush'>\r\n            {cartItems.map((item) => (\r\n              <ListGroup.Item key={item.product}>\r\n                <Row>\r\n                  <Col md={2}>\r\n                    <Image src={item.image} alt={item.name} fluid rounded />\r\n                  </Col>\r\n                  <Col md={3}>\r\n                    <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                  </Col>\r\n                  <Col md={2}>${item.price}</Col>\r\n                  <Col md={2}>\r\n                    <Form.Control\r\n                      as='select'\r\n                      value={item.qty}\r\n                      onChange={(e) =>\r\n                        dispatch(\r\n                          addToCart(item.product, Number(e.target.value))\r\n                        )\r\n                      }\r\n                    >\r\n                      {[...Array(item.countInStock).keys()].map((x) => (\r\n                        <option key={x + 1} value={x + 1}>\r\n                          {x + 1}\r\n                        </option>\r\n                      ))}\r\n                    </Form.Control>\r\n                  </Col>\r\n                  <Col md={2}>\r\n                    <Button\r\n                      type='button'\r\n                      variant='light'\r\n                      onClick={() => removeFromCartHandler(item.product)}\r\n                    >\r\n                      <i className='fas fa-trash'></i>\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n            ))}\r\n          </ListGroup>\r\n        )}\r\n      </Col>\r\n      <Col md={4}>\r\n        <Card>\r\n          <ListGroup variant='flush'>\r\n            <ListGroup.Item>\r\n              <h2>\r\n                Subtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)})\r\n                items\r\n              </h2>\r\n              $\r\n              {cartItems\r\n                .reduce((acc, item) => acc + item.qty * item.price, 0)\r\n                .toFixed(2)}\r\n            </ListGroup.Item>\r\n            <ListGroup.Item>\r\n              <Button\r\n                type='button'\r\n                className='btn-block'\r\n                disabled={cartItems.length === 0}\r\n                onClick={checkoutHandler}\r\n              >\r\n                Proceed To Checkout\r\n              </Button>\r\n            </ListGroup.Item>\r\n          </ListGroup>\r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n\r\nexport default CartScreen"],"mappings":"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"},"metadata":{},"sourceType":"module"}